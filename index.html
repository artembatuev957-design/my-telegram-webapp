<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #1a1a1a; --txt: #fff; --accent: #007aff; --card: #2b2b2b; }
        body.light { --bg: #f0f0f2; --txt: #000; --card: #fff; }
        body { background: var(--bg); color: var(--txt); font-family: -apple-system, sans-serif; margin: 0; padding: 0; transition: 0.3s; overflow: hidden; }
        
        .screen { display: none; height: 100vh; width: 100%; position: absolute; top: 0; left: 0; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .active { display: block; }

        /* –®–∞–ø–∫–∞ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        #mini-avatar { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; border: 2px solid var(--accent); }

        /* –°–µ—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .app { display: flex; flex-direction: column; align-items: center; cursor: pointer; text-align: center; font-size: 12px; }
        .icon { width: 60px; height: 60px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 30px; margin-bottom: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è */
        .section { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 10px; }
        .btn-row { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
        button { border: none; padding: 10px; border-radius: 8px; background: var(--accent); color: white; cursor: pointer; flex: 1; }
        .back-btn { background: none; color: var(--accent); font-weight: bold; text-align: left; padding: 0; margin-bottom: 20px; display: block; width: fit-content; }

        /* –ò–≥—Ä—ã */
        .game-card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; cursor: pointer; }
        canvas { background: #000; width: 100%; height: 200px; border-radius: 10px; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="scr-main" class="screen active">
        <div class="header">
            <h1 id="h-title">–°–º–∞—Ä—Ç—Ñ–æ–Ω</h1>
            <div id="mini-avatar" onclick="showScreen('scr-avatar')">üë®</div>
        </div>
        <div class="grid">
            <div class="app" onclick="showScreen('scr-weather')"><div class="icon" style="background: #ffcc00;">‚òÄÔ∏è</div><span id="m-weather">–ü–æ–≥–æ–¥–∞</span></div>
            <div class="app" onclick="showScreen('scr-games')"><div class="icon" style="background: #ff5e5e;">üéÆ</div><span id="m-games">–ò–≥—Ä—ã</span></div>
            <div class="app" onclick="showScreen('scr-settings')"><div class="icon" style="background: #8e8e93;">‚öôÔ∏è</div><span id="m-settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
            <div class="app" onclick="showScreen('scr-avatar')"><div class="icon" style="background: #4cd964;">üë§</div><span id="m-char">–ü–µ—Ä—Å–æ–Ω–∞–∂</span></div>
        </div>
    </div>

    <div id="scr-weather" class="screen">
        <button class="back-btn" onclick="showScreen('scr-main')">‚Üê –ù–∞–∑–∞–¥</button>
        <h2>–ü–æ–≥–æ–¥–∞</h2>
        <div class="section">
            <p>–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –≤ Telegram, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É:</p>
            <button onclick="requestWeather()">–ü–æ–ª—É—á–∏—Ç—å –≤ —á–∞—Ç</button>
        </div>
    </div>

    <div id="scr-games" class="screen">
        <button class="back-btn" onclick="showScreen('scr-main')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="game-card" onclick="alert('–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...')"><span>üêç</span> <div><b>–ó–º–µ–π–∫–∞</b><br><small>–ö–ª–∞—Å—Å–∏–∫–∞</small></div></div>
        <div class="game-card" onclick="alert('–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...')"><span>üõ∏</span> <div><b>–ò–Ω–≤–µ–π–¥–µ—Ä—Å</b><br><small>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –±–æ–π</small></div></div>
        <div class="game-card" onclick="alert('–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...')"><span>üß±</span> <div><b>–¢–µ—Ç—Ä–∏—Å</b><br><small>–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ</small></div></div>
    </div>

    <div id="scr-settings" class="screen">
        <button class="back-btn" onclick="showScreen('scr-main')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="section">
            <h3 id="set-lang">–Ø–∑—ã–∫</h3>
            <div class="btn-row">
                <button onclick="changeLang('ru')">üá∑üá∫ RU</button>
                <button onclick="changeLang('en')">üá∫üá∏ EN</button>
                <button onclick="changeLang('by')">üáßüáæ BY</button>
            </div>
        </div>
        <div class="section">
            <h3 id="set-theme">–§–æ–Ω (–¢–µ–º–∞)</h3>
            <div class="btn-row">
                <button style="background:#f0f0f2; color:#000" onclick="setTheme('light')">–°–≤–µ—Ç–ª—ã–π</button>
                <button style="background:#1a1a1a;" onclick="setTheme('dark')">–¢–µ–º–Ω—ã–π</button>
            </div>
        </div>
    </div>

    <div id="scr-avatar" class="screen">
        <button class="back-btn" onclick="showScreen('scr-main')">‚Üê –ù–∞–∑–∞–¥</button>
        <div class="section" style="text-align: center;">
            <div id="big-avatar" style="font-size: 80px; margin-bottom: 20px;">üë®</div>
            <div class="btn-row">
                <button onclick="setChar('üë®')">–ú—É–∂—á–∏–Ω–∞</button>
                <button onclick="setChar('üë©')">–ñ–µ–Ω—â–∏–Ω–∞</button>
                <button onclick="setChar('ü§ñ')">–†–æ–±–æ—Ç</button>
                <button onclick="setChar('üê±')">–ö–æ—Ç</button>
            </div>
            <br>
            <button style="background: #4cd964; width: 100%;" onclick="saveChar()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function setTheme(theme) {
            document.body.className = theme;
        }

        function setChar(emoji) {
            document.getElementById('big-avatar').innerText = emoji;
            document.getElementById('mini-avatar').innerText = emoji;
        }

        function changeLang(lang) {
            const dictionary = {
                ru: { h: "–°–º–∞—Ä—Ç—Ñ–æ–Ω", w: "–ü–æ–≥–æ–¥–∞", g: "–ò–≥—Ä—ã", s: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", c: "–ü–µ—Ä—Å–æ–Ω–∞–∂", l: "–Ø–∑—ã–∫", th: "–§–æ–Ω" },
                en: { h: "Smartphone", w: "Weather", g: "Games", s: "Settings", c: "Character", l: "Language", th: "Background" },
                by: { h: "–°–º–∞—Ä—Ç—Ñ–æ–Ω", w: "–ù–∞–¥–≤–æ—Ä'–µ", g: "–ì—É–ª—å–Ω—ñ", s: "–ù–∞–ª–∞–¥—ã", c: "–ü–µ—Ä—Å–∞–Ω–∞–∂", l: "–ú–æ–≤–∞", th: "–§–æ–Ω" }
            };
            let d = dictionary[lang];
            document.getElementById('h-title').innerText = d.h;
            document.getElementById('m-weather').innerText = d.w;
            document.getElementById('m-games').innerText = d.g;
            document.getElementById('m-settings').innerText = d.s;
            document.getElementById('m-char').innerText = d.c;
            document.getElementById('set-lang').innerText = d.l;
            document.getElementById('set-theme').innerText = d.th;
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É–±—Ä–∞–Ω–æ, –∫–∞–∫ –≤—ã –ø—Ä–æ—Å–∏–ª–∏
        }

        function requestWeather() {
            // –í–æ—Ç –∑–¥–µ—Å—å –º—ã –ü–ï–†–í–´–ô –†–ê–ó –∏—Å–ø–æ–ª—å–∑—É–µ–º sendData, —Ç–∞–∫ –∫–∞–∫ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –∏ –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
            tg.sendData("/weather");
        }

        function saveChar() {
            let currentEmoji = document.getElementById('big-avatar').innerText;
            tg.sendData("AVATAR:" + currentEmoji);
        }
    </script>
</body>
</html>
